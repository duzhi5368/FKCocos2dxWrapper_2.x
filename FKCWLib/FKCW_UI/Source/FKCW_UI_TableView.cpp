//-------------------------------------------------------------------------
#include "../Include/FKCW_UI_TableView.h"
//-------------------------------------------------------------------------
#define barFixSize	10.0f
#define barMinSize	20.0f
#define ColorLayerTag	1000
//-------------------------------------------------------------------------
static const unsigned int the_barH_width = 20 ;
static const unsigned int the_barH_height = 10 ;
static const unsigned int the_barH_bytes_per_pixel = 4 ;
static const unsigned int the_sizeof_barH_bytes = 800 ;
static const unsigned char the_barH_bytes[ the_sizeof_barH_bytes ] =
{
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA5, 0xA4, 0xA4, 0xFF, 0xA5, 0xA4, 0xA4, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0x00, 0xA3, 0xA2, 0xA2, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00
};
//-------------------------------------------------------------------------
static const unsigned int the_barV_width = 10 ;
static const unsigned int the_barV_height = 20 ;
static const unsigned int the_barV_bytes_per_pixel = 4 ;
static const unsigned int the_sizeof_barV_bytes = 800 ;
static const unsigned char the_barV_bytes[ the_sizeof_barV_bytes ] =
{
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA5, 0xA4, 0xA4, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA5, 0xA4, 0xA4, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 0xA3, 0xA2, 0xA2, 0xFF, 
	0xA3, 0xA2, 0xA2, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 
	0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00
};
//-------------------------------------------------------------------------
FKCW_UI_TableView_ScrollBar::FKCW_UI_TableView_ScrollBar( CCScrollView* table, int type )
	: m_nType( type )
	, m_fFadeDelayTime( 1.0f )
	, m_fSvFixSize( 0 )
	, m_fNowContentSize( 0 )
	, m_fBeforeContentSize( 0 )
	, m_fBarSize( 0 )
	, m_bIsCanFade( true )
	, m_pTarget( table )
{
	CCPoint svPosition = m_pTarget->getPosition();
	CCSize svSize = m_pTarget->cocos2d::CCNode::getContentSize();

	CCSpriteBatchNode* pBatchNode = NULL;
	CCImage* image = new CCImage();
	CCTexture2D* tex = new CCTexture2D();
	tex->initWithImage(image);
	switch( type )
	{
	case eScrollBarType_VerticalIn:
	case eScrollBarType_VerticalOut:
		if( pBatchNode == NULL )
		{
			image->initWithImageData((void*)the_barV_bytes, the_sizeof_barV_bytes, CCImage::kFmtPng, the_barV_width, the_barV_height );
			tex->initWithImage(image);
			pBatchNode = CCSpriteBatchNode::createWithTexture( tex );
		}
		if( pBatchNode )
		{
			initWithBatchNode( pBatchNode, 
				CCRectMake( 0, 0, barFixSize, barMinSize ),
				CCRectMake( 2, 5, 6, 10 ) );
		}
		m_fSvFixSize = svSize.height;
		m_fNowContentSize = m_fBeforeContentSize = m_pTarget->getContentSize().height;
		break;
	case eScrollBarType_HorizontalIn:
	case eScrollBarType_HorizontalOut:
		if( pBatchNode == NULL )
		{
			image->initWithImageData((void*)the_barH_bytes, the_sizeof_barH_bytes, CCImage::kFmtPng, the_barH_width, the_barH_height );
			tex->initWithImage(image);
			pBatchNode = CCSpriteBatchNode::createWithTexture( tex );
		}
		if( pBatchNode )
		{
			initWithBatchNode( pBatchNode, 
				CCRectMake( 0, 0, barFixSize, barMinSize ),
				CCRectMake( 5, 2, 10, 6 ) );
		}
		m_fSvFixSize = svSize.height;
		m_fNowContentSize = m_fBeforeContentSize = m_pTarget->getContentSize().height;
		break;
	}
	image->release();
	tex->release();

	setAnchorPoint( CCPointMake( 0.5, 0.5 ) );
	Refresh();

	m_pTarget->addChild( this, 0, 10 );

	scheduleOnce( schedule_selector( FKCW_UI_TableView_ScrollBar::FadeOut ), m_fFadeDelayTime );
}
//-------------------------------------------------------------------------
FKCW_UI_TableView_ScrollBar::~FKCW_UI_TableView_ScrollBar()
{

}
//-------------------------------------------------------------------------
FKCW_UI_TableView_ScrollBar* FKCW_UI_TableView_ScrollBar::Create( CCScrollView* table, int type )
{
	FKCW_UI_TableView_ScrollBar *pReturn = new FKCW_UI_TableView_ScrollBar( table, type );
	if( pReturn )
	{
		pReturn->autorelease();
		return pReturn;
	}
	else
	{
		delete pReturn;
		return NULL;
	}
}
//-------------------------------------------------------------------------
void FKCW_UI_TableView_ScrollBar::FadeOut( float dt )
{
	if( m_bIsCanFade )
	{
		float x, y;
		switch( m_nType )
		{
		case eScrollBarType_VerticalIn:
		case eScrollBarType_VerticalOut:
			x = 0.0f;
			y = 1.0f;
			break;

		case eScrollBarType_HorizontalIn:
		case eScrollBarType_HorizontalOut:
			x = 1.0f;
			y = 0.0f;
			break;
		}

		CCAction* action = CCScaleTo::create( 0.1f, x, y );
		this->runAction( action );
	}
}
//-------------------------------------------------------------------------
void FKCW_UI_TableView_ScrollBar::FadeIn( float dt )
{
	if( m_bIsCanFade )
	{
		CCAction* action = CCScaleTo::create( 0.1f, 1.0f, 1.0f );
		this->runAction( action );
	}
}
//-------------------------------------------------------------------------
void FKCW_UI_TableView_ScrollBar::RefreshPosition()
{
	CCSize targetContentSize = m_pTarget->getContentSize();
	CCSize targetViewSize = m_pTarget->getViewSize();
	CCPoint targetOffset = m_pTarget->getContentOffset();

	float x, y;
	float ratio;
	switch( m_nType )
	{
	case eScrollBarType_VerticalIn:
	case eScrollBarType_VerticalOut:
		ratio = ( -targetOffset.y / (targetContentSize.height - targetViewSize.height) );
		y = (-targetOffset.y + targetViewSize.height) - (targetViewSize.height * ( 1 - ratio )) + (( 0.5f - ratio ) * this->getContentSize().height);
		this->setPosition( CCPointMake( targetViewSize.width - this->getContentSize().width/2, y ) );
		break;
	case eScrollBarType_HorizontalIn:
	case eScrollBarType_HorizontalOut:
		ratio = ( -targetOffset.x / (targetContentSize.width - targetViewSize.width) );
		x = (-targetOffset.x + targetViewSize.width) - (targetViewSize.width * (1 - ratio)) + ((0.5f - ratio) * this->getContentSize().width);
		this->setPosition( CCPointMake( x, this->getContentSize().height/2 ) );
		break;
	}

	CCLog( "Pos(%.2f, %.2f)  TargetSize(%.2f, %.2f)  TargetViewSize(%.2f, %.2f)  TargetOffset(%.2f, %.2f)",
		this->getPositionX(), 
		this->getPositionY(),
		targetContentSize.width,
		targetContentSize.height,
		targetViewSize.width,
		targetViewSize.height,
		targetOffset.x,
		targetOffset.y);
}
//-------------------------------------------------------------------------
void FKCW_UI_TableView_ScrollBar::RefreshScale()
{
	m_fBeforeContentSize = m_fNowContentSize;

	float result = ( m_fSvFixSize / m_fNowContentSize ) * m_fSvFixSize;
	m_fBarSize = result;

	switch( m_nType )
	{
	case eScrollBarType_VerticalIn:
	case eScrollBarType_VerticalOut:
		this->setContentSize( CCSizeMake( barFixSize, result ) );
		break;
	case eScrollBarType_HorizontalIn:
	case eScrollBarType_HorizontalOut:
		this->setContentSize( CCSizeMake( result, barFixSize ) );
		break;
	}

	setAnchorPoint( CCPointMake( 0.5, 0.5 ) );
}
//-------------------------------------------------------------------------
void FKCW_UI_TableView_ScrollBar::Refresh()
{
	if( this->getScaleX() == 0.0f || this->getScaleY() == 0.0f )
		FadeIn(NULL);

	unscheduleAllSelectors();

	float offset = 0;
	switch( m_nType )
	{
	case eScrollBarType_VerticalIn:
	case eScrollBarType_VerticalOut:
		offset = m_pTarget->getContentOffset().y;
		m_fNowContentSize = m_pTarget->getContentSize().height;
		break;

	case eScrollBarType_HorizontalIn:
	case eScrollBarType_HorizontalOut:
		offset = m_pTarget->getContentOffset().x;
		m_fNowContentSize = m_pTarget->getContentSize().width;
		break;
	}

	this->setVisible( m_fNowContentSize >= m_fSvFixSize );

	RefreshScale();
	RefreshPosition();
}
//-------------------------------------------------------------------------
// FKCW_UI_TabelView_Cell
//-------------------------------------------------------------------------
FKCW_UI_TabelView_Cell::FKCW_UI_TabelView_Cell()
{
	m_pLabel = CCLabelTTF::create( "Cell", "Arial", 20 );
	m_pLabel->setAnchorPoint( ccp( 0, 0 ) );
	m_pLabel->setPosition( ccp( 0, 0 ) );
	this->addChild( m_pLabel );
}
//-------------------------------------------------------------------------
FKCW_UI_TabelView_Cell::~FKCW_UI_TabelView_Cell()
{
	removeChild( m_pLabel );
}
//-------------------------------------------------------------------------
void FKCW_UI_TabelView_Cell::draw()
{
	CCTableViewCell::draw();

	// »æÖÆ°üÎ§ºÐ
	CCPoint pos = getPosition();
	CCSize size = CCSizeMake(178, 200);
	CCPoint vertices[4]={
		ccp(pos.x + 1, pos.y + 1),
		ccp(pos.x + size.width - 1, pos.y + 1),
		ccp(pos.x + size.width - 1, pos.y + size.height - 1),
		ccp(pos.x + 1, pos.y + size.height - 1),
	};
	ccDrawColor4B(0, 0, 255, 255);
	ccDrawPoly(vertices, 4, true);
}
//-------------------------------------------------------------------------
// FKCW_UI_TabelView_Controller
//-------------------------------------------------------------------------
FKCW_UI_TabelView_Controller::FKCW_UI_TabelView_Controller( CCSize size )
	:m_pBar( NULL )
{
	SetCellSize( size );
}
//-------------------------------------------------------------------------
FKCW_UI_TabelView_Controller::~FKCW_UI_TabelView_Controller()
{

}
//-------------------------------------------------------------------------
unsigned int FKCW_UI_TabelView_Controller::numberOfCellsInTableView(CCTableView *table)
{
	return m_vecData.size();
}
//-------------------------------------------------------------------------
CCSize FKCW_UI_TabelView_Controller::cellSizeForTable(CCTableView *table)
{
	return m_tagCellSize;
}
//-------------------------------------------------------------------------
CCTableViewCell* FKCW_UI_TabelView_Controller::tableCellAtIndex(CCTableView *table, unsigned int idx)
{
	FKCW_UI_TabelView_Cell *cell = (FKCW_UI_TabelView_Cell*)table->dequeueCell();

	if (cell == NULL) 
	{
		cell = new FKCW_UI_TabelView_Cell;
		cell->setContentSize( m_tagCellSize );
	}

	CCString *str = CCString::createWithFormat( "C%d", m_vecData[idx] );
	cell->GetLabel()->setString( str->getCString() );

	return cell;
}
//-------------------------------------------------------------------------
void FKCW_UI_TabelView_Controller::scrollViewDidScroll(CCScrollView* view)
{
	if( m_pBar )
		m_pBar->Refresh();
}
//-------------------------------------------------------------------------
void FKCW_UI_TabelView_Controller::scrollViewDidZoom(CCScrollView* view)
{


}
//-------------------------------------------------------------------------
void FKCW_UI_TabelView_Controller::tableCellTouched(CCTableView* table, CCTableViewCell* cell)
{
	int p = cell->getIdx();

	CCPoint offset = table->getContentOffset();

	table->removeCellAtIndex(p);
	table->reloadData();

	if(p > 4) 
		table->setContentOffset(offset); 
}
//-------------------------------------------------------------------------
void FKCW_UI_TabelView_Controller::tableCellHighlight(CCTableView* table, CCTableViewCell* cell)
{
	CCLayerColor* mask;
	mask = CCLayerColor::create( ccc4(200, 0, 0, 100), m_tagCellSize.width, m_tagCellSize.height );
	cell->addChild( mask, 100, ColorLayerTag );
}
//-------------------------------------------------------------------------
void FKCW_UI_TabelView_Controller::tableCellUnhighlight(CCTableView* table, CCTableViewCell* cell)
{
	cell->removeChildByTag( ColorLayerTag, true );
}
//-------------------------------------------------------------------------